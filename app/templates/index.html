{% extends "base.html" %}

{% block content %}
<!-- Hero Section -->
<article class="prose lg:prose-xl mb-8">
    <h1>Welcome</h1>
    <p>
        The US Disease Tracker monitors three vaccine-preventable diseases—measles, invasive meningococcal disease, and pertussis (also known as whooping cough)—across the United States. Cases are tracked at the county or state level, with detailed statistics and visualizations available to capture disease transmission patterns over time and in the past two weeks. Cases are also reported by age group to illustrate which populations are most affected by these diseases. We are working to expand the tracker to include data on additional diseases in the future.
    </p>
    <p>
        Data included in this dashboard can be used to inform policy decisions and guide public health communications. This resource serves as a reliable source of information on selected vaccine-preventable diseases for members of the public, health care providers, and the public health practice community.
    </p>
</article>

<!-- Tracked Diseases -->
<div class="mb-8">
    <div class="flex items-center justify-between mb-6">
        <h2 class="text-3xl font-bold">Tracked Diseases</h2>
        <!-- Data source filter -->
        <div class="filter" id="source-filter">
            <input class="btn filter-reset" type="radio" name="data-source" aria-label="All"
                   hx-get="/api/html/diseases"
                   hx-target="#disease-cards"
                   hx-swap="innerHTML"
                   hx-push-url="/"
                   {{ 'checked' if not data_source_filter else '' }} />
            <input class="btn" type="radio" name="data-source" aria-label="NNDSS"
                   hx-get="/api/html/diseases?data_source=nndss"
                   hx-target="#disease-cards"
                   hx-swap="innerHTML"
                   hx-push-url="/?data_source=nndss"
                   {{ 'checked' if data_source_filter == 'nndss' else '' }} />
            <input class="btn" type="radio" name="data-source" aria-label="TRACKER"
                   hx-get="/api/html/diseases?data_source=tracker"
                   hx-target="#disease-cards"
                   hx-swap="innerHTML"
                   hx-push-url="/?data_source=tracker"
                   {{ 'checked' if data_source_filter == 'tracker' else '' }} />
        </div>
    </div>
    <!-- HTMX loads disease cards from /api/html/diseases -->
    <div id="disease-cards"
         hx-get="/api/html/diseases{% if data_source_filter %}?data_source={{ data_source_filter }}{% endif %}"
         hx-trigger="load"
         hx-swap="innerHTML">
        <!-- Loading skeleton -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {% for _ in range(3) %}
            <div class="disease-card">
                <div class="disease-card-body">
                    <div class="skeleton h-7 w-32 mb-1"></div>
                    <div class="skeleton h-5 w-24 mb-3"></div>
                    <div class="skeleton h-60 w-full"></div>
                </div>
                <div class="skeleton h-10 w-full rounded-b-lg"></div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<!-- About Section -->
<div class="mt-12 prose lg:prose-xl">
    <h3>About This System</h3>
    <p>
        This is a collaborative initiative conducted by the Association of State and Territorial Health Officials (ASTHO), the Council of State and Territorial Epidemiologists (CSTE), and Johns Hopkins University to facilitate public data sharing, visualization, and analyses for certain infectious diseases.
    </p>
    <p>
        Data included in this dashboard are voluntarily provided on a weekly or monthly basis from state, tribal, local, and territorial health departments. All data are collected in aggregate and are not manipulated once received.
    </p>
</div>
{% endblock %}

{% block extra_scripts %}
{% endblock %}
